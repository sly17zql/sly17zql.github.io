---
title: 【每日算法题】适龄的朋友
tags:
  - 双指针
description: 每天一道算法题，让生活变得更好
categories:
  - 学习
  - 代码
  - 算法
abbrlink: 15004
date: 2024-11-17 12:11:24
updated: 2024-11-17 12:11:24
---

### 适龄的朋友

在社交媒体网站上有 n 个用户。给你一个整数数组 ages ，其中 ages[i] 是第 i 个用户的年龄。

如果下述任意一个条件为真，那么用户 x 将不会向用户 y（x != y）发送好友请求：

- ages[y] <= 0.5 * ages[x] + 7
- ages[y] > ages[x]
- ages[y] > 100 && ages[x] < 100

否则，x 将会向 y 发送一条好友请求。

注意，如果 x 向 y 发送一条好友请求，y 不必也向 x 发送一条好友请求。另外，用户不会向自己发送好友请求。

返回在该社交媒体网站上产生的好友请求总数。

### 解答

```python
class Solution:
    def numFriendRequests(self, ages: List[int]) -> int:
        ans = 0
        ages.sort()
        left = 0
        pre_count = 1
        pre = ages[0]
        for i in range(1, len(ages)):
            current = ages[i]
            while ages[left] <= 0.5 * current + 7:
                left += 1
                if left >= i:
                    break
            ans += i - left
            if current == pre:
                if 0.5 * current + 7 < current:
                    ans += pre_count
                pre_count += 1
            else:
                pre = current
                pre_count = 1
        return ans
```

### 思路

据题可知，三个条件，条件3其实是包含在条件1里，为了保证无须判断条件1，那么只需要保证队列有序即可。

然后我们维护，left的边界值即可，保证ages[left] <= 0.5 * current + 7，加上维护的长度的值。

有一个特殊情况需要考虑，在于当两个值相同时，如果也满足ages[left] <= 0.5 * current + 7，那么相同值之间都是可以互相发送邮件的。那么就需要维护pre和pre_count。

### 复杂度

时间复杂度：O(NlogN)，需要做排序

空间复杂度：O(1)
